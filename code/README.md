# ポケコン改造用 ESP32 コード

ESP32 で以下のことを行うコードです。非常に荒っぽい、汚いコードですのでご了承ください。

### ターミナルモード（Raspberry Pi 起動時）
* UART で Raspberry Pi と通信
* 全キーのスキャン（押下状態を取得）
  - 一部については文字コードを生成
  - shift（主に記号入力）、caps（大文字入力）対応
* VT100サブセットの ANSI エスケープシーケンス処理
  - 必要最低限のコードのみ処理しています
  - emacs 等では、非対応のコードのため、時々表示がずれることがあります
  - カラー・反転等には対応していません

### RPN 関数電卓モード（ESP32 単体動作時）
* スタック32段、表示6段のRPN関数電卓（三角関数、対数・指数関数など）
* 32段階のアンドゥ機能
* フルキーのアルファベットを用いた機能
  - A-F でスタックの深い位置にある値を取り出し可能
  - X-Z のメモリ機能（shift-X で保存、X で呼び出し）

### なお、Raspberry Pi Zero 2W 側はプログラミング不要です。

* [設定画面（GUI の「設定」、または CLI の raspi-config）で、シリアルポート有効、シリアルコンソール有効にセット](https://toki-blog.com/pi-serial/)してください。GPIO14/15 (TXD/RXD) からシリアル通信でログインできるようになります（起動時・シャットダウン時のメッセージも表示されます）。
